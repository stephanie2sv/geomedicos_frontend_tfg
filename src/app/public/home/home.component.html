<div class="container py-1">
  <div class="row justify-content-center">
    <div class="col-lg-8 text-center ">

      <!-- Títulos -->
      <h1 class="display-5 fw-bold mb-3">Encuentra especialistas médicos de primer nivel</h1>
      <h2 class="fw-light mb-4 fs-4">Presencial o por telemedicina</h2>

      <div class="buscador-principal bg-white rounded-4 p-4 shadow-lg mx-auto" style="max-width: 900px;">
        <div class="row g-3 align-items-center">
      
          <!-- Campo búsqueda -->
          <div class="col-md-5">
            <div class="input-group border-bottom pb-2">
              <span class="input-group-text bg-transparent border-0">
                <i class="fas fa-search text-primary fs-5"></i>
              </span>
              <input type="text" 
                     class="form-control form-control-lg border-0 ps-0" 
                     placeholder="Especialidad o nombre del médico"
                     [(ngModel)]="terminoBusqueda">
            </div>
          </div>
      
          <!-- Selector localidad -->
          <div class="col-md-4">
            <div class="input-group border-bottom pb-2">
              <span class="input-group-text bg-transparent border-0">
                <i class="fas fa-map-marker-alt text-primary fs-5"></i>
              </span>
              <select class="form-select form-select-lg border-0 ps-0"
               [(ngModel)]="provinciaSeleccionada">
                 <option value="">Selecciona provincia</option>
                <option *ngFor="let provincia of provincias" [value]="provincia">
                  {{ provincia }}
                </option>
              </select>
            </div>
          </div>
      
          <!-- Botón buscar -->
          <div class="col-md-3">
            <button class="btn btn-warning btn-lg w-100 py-3 shadow-sm"
                    (click)="buscar()">
              <i class="fas fa-search me-2"></i>Buscar ahora
            </button>
          </div>
        </div>
      </div>

      <!-- Especialidades rápidas -->
      <div class="especialidades-rapidas mt-5">
        <div class="d-flex flex-wrap gap-3 justify-content-center">
          <a [routerLink]="['/especialidades', 1]" class="btn btn-outline-primary rounded-pill px-4">Dermatología</a>
          <a [routerLink]="['/especialidades', 2]" class="btn btn-outline-primary rounded-pill px-4">Odontología</a>
          <a [routerLink]="['/especialidades', 3]" class="btn btn-outline-primary rounded-pill px-4">Psicología</a>
          <a [routerLink]="['/especialidades', 4]" class="btn btn-outline-primary rounded-pill px-4">Traumatología</a>
          <a [routerLink]="['/especialidades']" class="btn btn-outline-primary rounded-pill px-4">Ver todas</a>
        </div>
      </div>

    </div>
  </div>
  @if(clinicasFiltradas){
    <div class="mt-4">
      <h3 class="mb-3">Resultados:</h3>
      <div class="row">
      @for(clinica of clinicasFiltradas; track clinica.idClinica){
        <div class="col-lg-4 mb-2">
        <app-clinicas-card [clinica]="clinica" (verDetalle)="verDetalleClinica($event)"></app-clinicas-card>
        </div>
      }
      </div>
      
    </div>
  }

  @if (clinicaSeleccionada) {
  <div class="modal show" style="display: block; background-color: rgba(0,0,0,0.5);">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">{{ clinicaSeleccionada.nombre }}</h5>
          <button class="btn-close" (click)="cerrarModalClinica()"></button>
        </div>
        <div class="modal-body">
          <p><strong>Dirección:</strong> {{ clinicaSeleccionada.direccion }}</p>
          <p><strong>Especialidades:</strong></p>
          <div class="d-flex flex-wrap gap-2">
            @for (esp of clinicaSeleccionada.especialidades || []; track esp.idEspecialidad) {
              <button class="btn btn-outline-primary" (click)="irAEspecialidad(esp.idEspecialidad)">
                {{ esp.nombre }}
              </button>
            }
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" (click)="cerrarModalClinica()">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
}
 
</div>
